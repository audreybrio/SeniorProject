import{ref,defineComponent,provide,watch,onMounted,toRef,onBeforeUnmount,pushScopeId,popScopeId,openBlock,createBlock,createVNode,renderSlot,withScopeId,inject,Fragment,createCommentVNode,withDirectives,vShow,computed,Comment}from'vue';let p=Symbol("map"),q=Symbol("api"),r=Symbol("marker"),t=Symbol("mapTilesLoaded"),u=ref(null),v="click dblclick drag dragend dragstart mousedown mousemove mouseout mouseover mouseup rightclick".split(" ");
var x=function w(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;var c;if(Array.isArray(a)){var d=a.length;if(d!=b.length)return!1;for(c=d;0!==c--;)if(!w(a[c],b[c]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();var g=Object.keys(a);d=g.length;
if(d!==Object.keys(b).length)return!1;for(c=d;0!==c--;)if(!Object.prototype.hasOwnProperty.call(b,g[c]))return!1;for(c=d;0!==c--;)if(d=g[c],!w(a[d],b[d]))return!1;return!0}return a!==a&&b!==b};
class y{constructor({apiKey:a,channel:b,client:e,id:c="__googleMapsScriptId",libraries:d=[],language:g,region:f,version:m,mapIds:h,nonce:n,retries:k=3,url:l="https://maps.googleapis.com/maps/api/js"}){this.CALLBACK="__googleMapsCallback";this.callbacks=[];this.loading=this.done=!1;this.errors=[];this.version=m;this.apiKey=a;this.channel=b;this.client=e;this.id=c||"__googleMapsScriptId";this.libraries=d;this.language=g;this.region=f;this.mapIds=h;this.nonce=n;this.retries=k;this.url=l;if(y.instance){if(!x(this.options,
y.instance.options))throw Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(y.instance.options)}`);return y.instance}y.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+
1}createUrl(){let a=this.url;a+=`?callback=${this.CALLBACK}`;this.apiKey&&(a+=`&key=${this.apiKey}`);this.channel&&(a+=`&channel=${this.channel}`);this.client&&(a+=`&client=${this.client}`);0<this.libraries.length&&(a+=`&libraries=${this.libraries.join(",")}`);this.language&&(a+=`&language=${this.language}`);this.region&&(a+=`&region=${this.region}`);this.version&&(a+=`&v=${this.version}`);this.mapIds&&(a+=`&map_ids=${this.mapIds.join(",")}`);return a}deleteScript(){let a=document.getElementById(this.id);
a&&a.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((a,b)=>{this.loadCallback(e=>{e?b(e.error):a(window.google)})})}loadCallback(a){this.callbacks.push(a);this.execute()}setScript(){if(document.getElementById(this.id))this.callback();else{var a=this.createUrl(),b=document.createElement("script");b.id=this.id;b.type="text/javascript";b.src=a;b.onerror=this.loadErrorCallback.bind(this);b.defer=!0;b.async=!0;this.nonce&&(b.nonce=this.nonce);document.head.appendChild(b)}}reset(){this.deleteScript();
this.loading=this.done=!1;this.errors=[];this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(a){this.errors.push(a);this.errors.length<=this.retries?(a=this.errors.length*Math.pow(2,this.errors.length),console.log(`Failed to load Google Maps script, retrying in ${a} ms.`),setTimeout(()=>{this.deleteScript();this.setScript()},a)):(this.onerrorEvent=a,this.callback())}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0;this.loading=
!1;this.callbacks.forEach(a=>{a(this.onerrorEvent)});this.callbacks=[]}execute(){this.resetIfRetryingFailed();this.done?this.callback():window.google&&window.google.maps&&window.google.maps.version?(console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback()):this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}let z="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed".split(" ");
var A=defineComponent({props:{apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,
default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},
mapTypeId:{type:[Number,String],required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},
scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1}},emits:z,setup(a,{emit:b}){let e=ref(null),c=ref(!1),d=ref(null),g=ref(null),f=ref(!1);provide(p,d);provide(q,
g);provide(t,f);let m=()=>{const b={...a};Object.keys(b).forEach(a=>{void 0===b[a]&&delete b[a]});var l=a=>{var b;return a?{position:null===(b=g.value)||void 0===b?void 0:b.ControlPosition[a]}:{}};l={scaleControlOptions:a.scaleControlStyle?{style:a.scaleControlStyle}:{},panControlOptions:l(a.panControlPosition),zoomControlOptions:l(a.zoomControlPosition),rotateControlOptions:l(a.rotateControlPosition),streetViewControlOptions:l(a.streetViewControlPosition),fullscreenControlOptions:l(a.fullscreenControlPosition),
disableDefaultUI:a.disableDefaultUi};return{...b,...l}},h=watch([g,d],([a,b])=>{a&&b&&(a.event.addListenerOnce(b,"tilesloaded",()=>{f.value=!0}),setTimeout(h,0))},{immediate:!0}),n=()=>{try{const {apiKey:b,region:l,version:c,language:d,libraries:e}=a;u.value=new y({apiKey:b,region:l,version:c,language:d,libraries:e})}catch(k){console.error(k)}};onMounted(()=>{n();u.value.load().then(()=>{g.value=google.maps;d.value=new google.maps.Map(e.value,m());z.forEach(a=>{var c;null===(c=d.value)||void 0===
c?void 0:c.addListener(a,c=>b(a,c))});c.value=!0;let k=Object.keys(a).filter(a=>!["center","zoom"].includes(a)).map(b=>toRef(a,b));watch([()=>a.center,()=>a.zoom,...k],([a,b],[c,e])=>{var l,k,f;let {center:g,zoom:h,...n}=m();null===(l=d.value)||void 0===l?void 0:l.setOptions(n);void 0!==b&&b!==e&&(null===(k=d.value)||void 0===k?void 0:k.setZoom(b));b=!c||a.lng!==c.lng||a.lat!==c.lat;a&&b&&(null===(f=d.value)||void 0===f?void 0:f.panTo(a))})})});onBeforeUnmount(()=>{var a;f.value=!1;d.value&&(null===
(a=g.value)||void 0===a?void 0:a.event.clearInstanceListeners(d.value))});return{mapRef:e,ready:c,map:d,api:g,mapTilesLoaded:f}}});function B(a,b){void 0===b&&(b={});b=b.insertAt;if(a&&"undefined"!==typeof document){var e=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css";"top"===b?e.firstChild?e.insertBefore(c,e.firstChild):e.appendChild(c):e.appendChild(c);c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a))}}B("\n.mapdiv[data-v-177d06e3] {\n  width: 100%;\n  height: 100%;\n}\n");
let C=withScopeId("data-v-177d06e3");pushScopeId("data-v-177d06e3");let D={ref:"mapRef",class:"mapdiv"};popScopeId();let E=C(a=>(openBlock(),createBlock("div",null,[createVNode("div",D,null,512),renderSlot(a.$slots,"default",{ready:a.ready,map:a.map,api:a.api,mapTilesLoaded:a.mapTilesLoaded},void 0,!0)])));A.render=E;A.__scopeId="data-v-177d06e3";
let F=(a,b,e,c)=>{let d=null;const g=ref(null),f=inject(p,ref(null)),m=inject(q,ref(null));watch([f,e],(h,[n,k])=>{h=JSON.stringify(e.value)!==JSON.stringify(k)||f.value!==n;f.value&&m.value&&h&&(d?(d.setOptions(e.value),d.setMap(f.value)):(g.value=d=new m.value[a]({...e.value,map:f.value}),b.forEach(a=>{null===d||void 0===d?void 0:d.addListener(a,b=>c(a,b))})))},{immediate:!0});onBeforeUnmount(()=>{var a;d&&(null===(a=m.value)||void 0===a?void 0:a.event.clearInstanceListeners(d),d.setMap(null))});
return g},G="animation_changed click dblclick rightclick dragstart dragend drag mouseover mousedown mouseout mouseup draggable_changed clickable_changed contextmenu cursor_changed flat_changed rightclick zindex_changed icon_changed position_changed shape_changed title_changed visible_changed".split(" ");
var H=defineComponent({name:"Marker",props:{options:{type:Object,required:!0}},emits:G,setup(a,{emit:b,expose:e,slots:c}){a=toRef(a,"options");b=F("Marker",G,a,b);provide(r,b);e({marker:b});return()=>{var a;return null===(a=c.default)||void 0===a?void 0:a.call(c)}}}),I=defineComponent({name:"Polyline",props:{options:{type:Object,required:!0}},emits:v,setup(a,{emit:b}){a=toRef(a,"options");return{polyline:F("Polyline",v,a,b)}},render:()=>null}),K=defineComponent({name:"Polygon",props:{options:{type:Object,
required:!0}},emits:v,setup(a,{emit:b}){a=toRef(a,"options");return{polygon:F("Polygon",v,a,b)}},render:()=>null});let L=v.concat(["bounds_changed"]);var M=defineComponent({name:"Rectangle",props:{options:{type:Object,required:!0}},emits:L,setup(a,{emit:b}){a=toRef(a,"options");return{rectangle:F("Rectangle",L,a,b)}},render:()=>null});let N=v.concat(["center_changed","radius_changed"]);
var O=defineComponent({name:"Circle",props:{options:{type:Object,required:!0}},emits:N,setup(a,{emit:b}){a=toRef(a,"options");return{circle:F("Circle",N,a,b)}},render:()=>null}),P=defineComponent({props:{position:{type:String,required:!0},index:{type:Number,default:1}},emits:["content:loaded"],setup(a,{emit:b}){let e=ref(null),c=inject(p,ref(null)),d=inject(q,ref(null)),g=inject(t,ref(!1)),f=ref(!1),m=watch([g,d,e],([c,d,e])=>{d&&c&&e&&(h(a.position),f.value=!0,b("content:loaded"),setTimeout(m,0))},
{immediate:!0}),h=a=>{c.value&&d.value&&e.value&&c.value.controls[d.value.ControlPosition[a]].push(e.value)},n=a=>{if(c.value&&d.value){let b=null;a=d.value.ControlPosition[a];c.value.controls[a].forEach((a,c)=>{a===e.value&&(b=c)});null!==b&&c.value.controls[a].removeAt(b)}};onBeforeUnmount(()=>n(a.position));watch(()=>a.position,(a,b)=>{n(b);h(a)});watch(()=>a.index,b=>{b&&e.value&&(e.value.index=a.index)});return{controlRef:e,showContent:f}}});let Q={ref:"controlRef"};
P.render=function(a){return openBlock(),createBlock(Fragment,null,[createCommentVNode("\n    v-show must be used instead of v-if otherwise there\n    would be no rendered content pushed to the map controls\n  "),withDirectives(createVNode("div",Q,[renderSlot(a.$slots,"default")],512),[[vShow,a.showContent]])],2112)};let R="closeclick content_changed domready position_changed visible zindex_changed".split(" ");
var S=defineComponent({props:{options:{type:Object,default:()=>({})}},emits:R,setup(a,{slots:b,emit:e}){let c,d=ref(),g=ref(),f=inject(p,ref(null)),m=inject(q,ref(null)),h=inject(r,ref(null)),n,k=computed(()=>{var a;return null===(a=b.default)||void 0===a?void 0:a.call(b).some(a=>a.type!==Comment)});onMounted(()=>{watch([f,()=>a.options],([,a],[b,J])=>{b=JSON.stringify(a)!==JSON.stringify(J)||f.value!==b;f.value&&m.value&&b&&(c?(c.setOptions({...a,content:k.value?g.value:a.content}),h.value||c.open({map:f.value})):
(d.value=c=new m.value.InfoWindow({...a,content:k.value?g.value:a.content}),h.value?n=h.value.addListener("click",()=>{c.open({map:f.value,anchor:h.value})}):c.open({map:f.value}),R.forEach(a=>{null===c||void 0===c?void 0:c.addListener(a,b=>e(a,b))})))},{immediate:!0})});onBeforeUnmount(()=>{var a;n&&n.remove();c&&(null===(a=m.value)||void 0===a?void 0:a.event.clearInstanceListeners(c),c.close())});return{infoWindow:d,infoWindowRef:g,hasSlotContent:k,anchor:h}}});B("\n.info-window-content[data-v-5b373d6e] {\n  display: none;\n}\n.mapdiv .info-window-content[data-v-5b373d6e] {\n  display: block;\n}\n");
let T=withScopeId("data-v-5b373d6e");pushScopeId("data-v-5b373d6e");let U={key:0,ref:"infoWindowRef",class:"info-window-content"};popScopeId();let V=T(a=>a.hasSlotContent?(openBlock(),createBlock("div",U,[renderSlot(a.$slots,"default",{},void 0,!0)],512)):createCommentVNode("v-if",!0));S.render=V;S.__scopeId="data-v-5b373d6e";export{O as Circle,P as CustomControl,A as GoogleMap,S as InfoWindow,H as Marker,K as Polygon,I as Polyline,M as Rectangle}
